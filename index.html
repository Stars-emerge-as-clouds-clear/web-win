<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Redirect to HTTPS</title>
<script>
// 函数：将非HTTPS协议转换为HTTPS协议
function convertToHttps(url) {
    return url.replace(/^http:/, 'https:');
}

// 函数：设置Cookies
function setCookie(name, value, expirationSeconds) {
    var d = new Date();
    d.setTime(d.getTime() + expirationSeconds * 1000);
    var expires = "expires=" + d.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/";
}

// 当前时间的哈希值
function generateHash() {
    var now = new Date();
    var hash = now.getFullYear() + 
              (now.getMonth() + 1).toString().padStart(2, '0') + 
              now.getDate().toString().padStart(2, '0') + 
              now.getHours().toString().padStart(2, '0') + 
              now.getMinutes().toString().padStart(2, '0');
    return hash;
}

// 页面加载时执行
window.onload = function() {
    // 转换所有链接为HTTPS
    var links = document.getElementsByTagName('a');
    for (var i = 0; i < links.length; i++) {
        links[i].href = convertToHttps(links[i].href);
    }

    // 设置Cookies
    var hashValue = generateHash();
    setCookie('hash', hashValue, 20);

    // 跳转到main.html
    window.location.href = 'main.html';
};
</script>
</head>
<body>
Redirecting...
</body>
</html>
